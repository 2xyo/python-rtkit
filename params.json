{"name":"rtkit","tagline":"Python Api for Request Tracker's REST interface","body":"# Request Tracker REST Interface\r\n[![travis](https://secure.travis-ci.org/z4r/python-rtkit.png?branch=master)](https://travis-ci.org/z4r/python-rtkit)\r\n\r\n[![coveralls](https://coveralls.io/repos/z4r/python-rtkit/badge.png?branch=master)](https://coveralls.io/r/z4r/python-rtkit)\r\n\r\n[Request Tracker](http://bestpractical.com/rt/) data access python module for REST interface.\r\n\r\n## Installation\r\nUsing pip stable:\r\n\r\n    $ pip install python-rtkit\r\n\r\nUsing pip dev:\r\n\r\n    $ pip install git+https://github.com/z4r/python-rtkit\r\n\r\n## RT REST API Summary\r\nMore detailed version: [Request Tracker Wiki](http://requesttracker.wikia.com/wiki/REST)\r\n<table>\r\n<tbody><tr>\r\n<td>01</td>\r\n<td>W</td>\r\n<td>Create ticket</td>\r\n<td>ticket/new</td>\r\n</tr>\r\n<tr>\r\n<td>02</td>\r\n<td>RW</td>\r\n<td>Read/Update ticket</td>\r\n<td>ticket/&lt;ticket-id&gt;</td>\r\n</tr>\r\n<tr>\r\n<td>03</td>\r\n<td>W</td>\r\n<td>Create ticket comment</td>\r\n<td>ticket/&lt;ticket-id&gt;/comment</td>\r\n</tr>\r\n<tr>\r\n<td>04</td>\r\n<td>RW</td>\r\n<td>Read/Update ticket links</td>\r\n<td>ticket/&lt;ticket-id&gt;/links</td>\r\n</tr>\r\n<tr>\r\n<td>05</td>\r\n<td>R</td>\r\n<td>Read ticket attachments</td>\r\n<td>ticket/&lt;ticket-id&gt;/attachments</td>\r\n</tr>\r\n<tr>\r\n<td>06</td>\r\n<td>R</td>\r\n<td>Read ticket attachment</td>\r\n<td>ticket/&lt;ticket-id&gt;/attachments/&lt;attachment-id&gt;</td>\r\n</tr>\r\n<tr>\r\n<td>07</td>\r\n<td>R</td>\r\n<td>Read ticket attachment content</td>\r\n<td>ticket/&lt;ticket-id&gt;/attachments/&lt;attachment-id&gt;/content</td>\r\n</tr>\r\n<tr>\r\n<td>08</td>\r\n<td>R</td>\r\n<td>Read ticket history</td>\r\n<td>ticket/&lt;ticket-id&gt;/history</td>\r\n</tr>\r\n<tr>\r\n<td>09</td>\r\n<td>R</td>\r\n<td>Read detailed ticket history</td>\r\n<td>ticket/&lt;ticket-id&gt;/history?format=l</td>\r\n</tr>\r\n<tr>\r\n<td>10</td>\r\n<td>R</td>\r\n<td>Read ticket history item</td>\r\n<td>ticket/&lt;ticket-id&gt;/history/id/&lt;history-id&gt;</td>\r\n</tr>\r\n<tr>\r\n<td>11</td>\r\n<td>R</td>\r\n<td>Read user by id</td>\r\n<td>user/&lt;user-id&gt;</td>\r\n</tr>\r\n<tr>\r\n<td>12</td>\r\n<td>R</td>\r\n<td>Read user by name</td>\r\n<td>user/&lt;user-Name&gt;</td>\r\n</tr>\r\n<tr>\r\n<td>13</td>\r\n<td>R</td>\r\n<td>Read queue by id</td>\r\n<td>queue/&lt;queue-id&gt;</td>\r\n</tr>\r\n<tr>\r\n<td>14</td>\r\n<td>R</td>\r\n<td>Read queue by name</td>\r\n<td>queue/&lt;queue-Name&gt;</td>\r\n</tr>\r\n<tr>\r\n<td>15</td>\r\n<td>R</td>\r\n<td>Search tickets</td>\r\n<td>search/ticket?query=&lt;q&gt;&amp;orderby=&lt;o&gt;&amp;format=&lt;f&gt;</td>\r\n</tr>\r\n</tbody></table>\r\n\r\n## Authentication Handlers\r\n\r\n### Basic Authentication\r\n\r\n```python\r\nfrom rtkit.resource import RTResource\r\nfrom rtkit.authenticators import BasicAuthenticator\r\n\r\nurl = 'http://<HOST>/REST/1.0/'\r\nresource = RTResource(url, '<USER>', '<PWD>', BasicAuthenticator)\r\n```\r\n\r\n### Cookie-based Authentication\r\n\r\n```python\r\nfrom rtkit.resource import RTResource\r\nfrom rtkit.authenticators import CookieAuthenticator\r\n\r\nurl = 'http://<HOST>/REST/1.0/'\r\nresource = RTResource(url, '<USER>', '<PWD>', CookieAuthenticator)\r\n```\r\n\r\n### Kerberos Authentication\r\n\r\n```python\r\nfrom rtkit.resource import RTResource\r\nfrom rtkit.authenticators import KerberosAuthenticator\r\n\r\nurl = 'http://<HOST>/REST/1.0/'\r\nresource = RTResource(url, None, None, KerberosAuthenticator)\r\n```\r\n\r\n> Remeber to install `urllib2_kerberos`\r\n\r\n## Logging\r\n\r\n```python\r\nfrom rtkit import set_logging\r\nimport logging\r\nset_logging('debug')\r\nlogger = logging.getLogger('rtkit')\r\n```\r\n\r\n## Create ticket\r\n\r\n```python\r\ncontent = {\r\n    'content': {\r\n        'Queue': 1,\r\n        'Subject' : 'New Ticket',\r\n        'Text' : 'My useless\\ntext on\\nthree lines.',\r\n    }\r\n}\r\ntry:\r\n    response = resource.post(path='ticket/new', payload=content,)\r\n    logger.info(response.parsed)\r\nexcept RTResourceError as e:\r\n    logger.error(e.response.status_int)\r\n    logger.error(e.response.status)\r\n    logger.error(e.response.parsed)\r\n```\r\n\r\n## Read a ticket\r\n\r\n```python\r\ntry:\r\n    response = resource.get(path='ticket/1')\r\n    for r in response.parsed:\r\n        for t in r:\r\n            logger.info(t)\r\nexcept RTResourceError as e:\r\n    logger.error(e.response.status_int)\r\n    logger.error(e.response.status)\r\n    logger.error(e.response.parsed)\r\n```\r\n\r\n## Edit a ticket or ticket's links\r\n\r\nTicket (or ticket's links) editing hasn't **all-or-nothing behaviour**; so it's very difficult to capture errors.\r\nFor example trying to change Queue to a not admitted one (or to edit an unknown field) RT will return:\r\n\r\n```\r\nRT/3.8.10 409 Syntax Error\r\n\r\n# queue: You may not create requests in that queue.\r\n# spam: Unknown field.\r\n\r\nid:\r\nSubject: Try Edit Ticket\r\nTimeWorked: 1\r\nQueue: 2\r\nSpam: 10\r\n```\r\n\r\nFor now `rtkit` will raise `SyntaxError` with the errors list in `e.response.parsed`\r\n\r\n## Comment on a Ticket with Attachments\r\n\r\nUsually your requests will be something like this.\r\n\r\n```python\r\ntry:\r\n    params = {\r\n        'content' :{\r\n            'Action' : 'comment',\r\n            'Text' : 'Comment with attach',\r\n            'Attachment' : 'x.txt, 140x105.jpg',\r\n        },\r\n        'attachment_1' : file('x.txt'),\r\n        'attachment_2' : file('140x105.jpg'),\r\n    }\r\n    response = resource.post(path='ticket/16/comment', payload=params,)\r\n    for r in response.parsed:\r\n       for t in r:\r\n           logger.info(t)\r\nexcept RTResourceError as e:\r\n    logger.error(e.response.status_int)\r\n    logger.error(e.response.status)\r\n    logger.error(e.response.parsed)\r\n```\r\n\r\n##Â License\r\n\r\nThis software is licensed under the `Apache License 2.0`.\r\nSee the `LICENSE` file in the top distribution directory for the full license text.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}